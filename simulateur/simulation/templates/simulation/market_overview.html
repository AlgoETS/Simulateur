{% extends 'includes/base_generic.html' %}

{% block content %}
<div class="max-w-7xl mx-auto sm:px-6 lg:px-8 py-8">
    <h1 class="text-4xl font-extrabold text-gray-900 mb-8">{{ title }}</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Portfolio Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Portfolio</h2>
            <p class="text-gray-700 mb-2">Balance: ${{ portfolio.balance }}</p>
            <p class="text-gray-700 mb-2">Stocks: {{ portfolio.stocks.count }}</p>
            <a href="/portfolio" class="text-indigo-600 hover:text-indigo-900">View Portfolio</a>
        </div>

        <!-- Transactions Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Recent Transactions</h2>
            <ul class="divide-y divide-gray-200">
                {% for transaction in transactions %}
                    <li class="py-4">
                        <p class="text-gray-700">{{ transaction.asset }} - {{ transaction.amount }} shares @ ${{ transaction.price }}</p>
                        <p class="text-sm text-gray-500">{{ transaction.date }}</p>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Stocks Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Available Stocks</h2>
            <ul class="divide-y divide-gray-200">
                {% for stock in stocks %}
                    <li class="py-4 flex justify-between items-center">
                        <div>
                            <p class="text-gray-700">{{ stock.company.name }} ({{ stock.ticker }}) - ${{ stock.price }}</p>
                        </div>
                        <a href="{% url 'buy_sell' stock.id %}" class="text-indigo-600 hover:text-indigo-900">Trade</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Market News Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Market News</h2>
            <ul class="divide-y divide-gray-200">
                {% for news_item in market_news %}
                    <li class="py-4">
                        <h3 class="text-lg font-semibold">{{ news_item.title }}</h3>
                        <p class="text-gray-700">{{ news_item.content|truncatewords:20 }}</p>
                        <p class="text-sm text-gray-500">{{ news_item.published_date }}</p>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Team Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Your Team</h2>
            <p class="text-gray-700 mb-2">Team Name: {{ user_profile.team.name }}</p>
            <p class="text-gray-700 mb-2">Members: {{ user_profile.team.members.count }}</p>
            <a href="/team" class="text-indigo-600 hover:text-indigo-900">View Team</a>
        </div>

        <!-- Simulation Settings Card -->
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Simulation Settings</h2>
            <p class="text-gray-700 mb-2">Timer Step: {{ simulation_settings.timer_step }} {{ simulation_settings.get_timer_step_unit_display }}</p>
            <p class="text-gray-700 mb-2">Fluctuation Rate: {{ simulation_settings.fluctuation_rate }}</p>
            <a href="/settings" class="text-indigo-600 hover:text-indigo-900">View Settings</a>
        </div>
    </div>
</div>
{% endblock %}
